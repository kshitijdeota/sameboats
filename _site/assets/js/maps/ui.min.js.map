{"version":3,"sources":["ui.js"],"names":["UI","[object Object]","this","palette","clr1","clr2","clr3","black","white","neutral","darkneutral","coolneutral","dom","tabs","document","getElementById","children","panels","i","length","setAttribute","onclick","j","style","display","classList","remove","k","add","getAttribute","h","window","innerHeight","clientHeight","intersections","map","header","obj","list","count","prop","authors","hasOwnProperty","authorItemTemplate","container","name","key","tag","escapeHtml","string","entityMap","&","<",">","\"","'","/","`","=","String","replace","s","IntersectionsUI","super","eint","elem","legend","getElementsByClassName","dateslider","datestart","dateend","view","results","title","initLegendUI","d3","select","on","transition","duration","TrajectoriesUI","etra","trajectories","ItinerariesUI","eiti","itineraries","selections","author1","author2","SearchUI","searchfield","searchresults"],"mappings":"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","file":"../ui.min.js","sourcesContent":["/* global d3 */\n\nclass UI {\n\t\n  constructor(){\n            \n    // Mirrors variables in assets/sass/style.css\n    \n    this.palette = {\n      clr1:        '#FCB040', // Sunrise Orange\n      clr2:        '#406AFC', // Bright Azure\n      clr3:        '#585F66', // Storm Grey \n      black:       '#000000',\n      white:       '#F7F8F9',\n      neutral:     '#F0F1F2', // Lightest Neutral in SASS\n      darkneutral: '#A5ACAF', \n      coolneutral: '#E6E7E9'  \n    }\n    \n    this.dom = {};\n    \n    \n    /*    \n    this.dom = {\n      tabs: document.getElementById('tabs').getElementsByTagName('a'),\n    };\n    */    \n  } \n  \n  /* LEGACY METHOD. Script no longer handles panel UI. Left for reference. */ \n    \n  initPanels() {\n            \n    var tabs = document.getElementById(\"tabs\").children;\n    var panels = document.getElementById(\"panels\").children;\n    \n    for(var i=0;i<tabs.length;i++) {\n      tabs[i].setAttribute('data-panel',i);\n      tabs[i].onclick = function() {\n        for(var j=0;j<panels.length;j++) {\n          panels[j].style.display = 'none';\n          panels[j].classList.remove('selected');\n        }\n        for(var k=0;k<panels.length;k++) {\n          tabs[k].classList.remove('active');\n        }\n        this.classList.add('active');\n        panels[this.getAttribute('data-panel')].style.display = 'block';\n        panels[this.getAttribute('data-panel')].classList.add('selected');\n\n      }\n    }\n    \n    // set the minimum height of the panels, which should be the window height less the nav elements`.\n    \n    var h = window.innerHeight - document.getElementById('nav').clientHeight - this.dom.intersections.map.header.clientHeight; \n        \n    document.getElementById('panels').setAttribute(\"style\",\"min-height:\" + h + \"px\");\n  }\n  \n  // Generates the <li> elements for author lists\n  \n  generateAuthorList(obj) {\n    \n    var list = '';\n    var i = 1;\n    var count = 1;\n    \n    for (var prop in obj.authors) {\n      \n      if (i%2 != 0) {\n        list += \"<div class='arow'>\\n\";\n      }\n      \n      if (obj.authors.hasOwnProperty(prop)) {        \n        list += this.authorItemTemplate(obj.authors[prop],prop,'a',count) + \"\\n\";\n      }\n      \n      if (i%2 == 0) {\n        list += \"</div>\\n\";\n      }\n      \n      i = i == 2 ? 1 : 2;\n      count++;\n    }\n    \n    return list;\n    \n  }\n  \n  // Adds a list size class to a list container\n  \n  addListSizeClass(obj,container) {\n    container.classList.remove('large-set');\n    container.classList.remove('small-set');\n    container.classList.add(obj.length > 25 ? 'large-set' : 'small-set');\n  } \n  \n  authorItemTemplate(name,key,tag,count) {\n    return \"<\" + tag + \" data-key='\" + key + \"' class='author a-\" + count + \"' title='\" + this.escapeHtml(name) + \"'>\" + name + \"</\" + tag + \">\";\n  }\n  \n\n  escapeHtml (string) {\n    var entityMap = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#39;',\n      '/': '&#x2F;',\n      '`': '&#x60;',\n      '=': '&#x3D;'\n    };\n\n    return String(string).replace(/[&<>\"'`=\\/]/g, function (s) {\n      return entityMap[s];\n    });\n  }  \n  \n}\n\nclass IntersectionsUI extends UI {\n  constructor(){\n    super();\n    var eint = document.getElementById('intersections');\n    \n    this.dom.intersections = {\n      elem: eint,\n      legend: eint.getElementsByClassName('legend')[0],\n      dateslider: eint.getElementsByClassName('slider')[0],\n      datestart: eint.getElementsByClassName('date-start')[0],\n      dateend: eint.getElementsByClassName('date-end')[0],\n      map: {\n        header: eint.getElementsByClassName('header')[1],\n        view: eint.getElementsByClassName('map')[0]\n      },\n      results: {\n        header: eint.getElementsByClassName('header')[2],\n        title: eint.getElementsByClassName('title')[0],\n        view: eint.getElementsByClassName('results-view')[0]\n      }\n    }\n    \n    this.initLegendUI();\n  }\n  \n  initLegendUI() {\n    d3.select(this.dom.intersections.legend).on('click',function(){\n      d3.select(this)\n        .transition()\n        .duration(800)\n        .style('opacity',0)\n        .remove();\n    });\n  }\n}\n\nclass TrajectoriesUI extends UI {\n  constructor() {\n    super();\n    var etra = document.getElementById('trajectories');\n    \n    this.dom.trajectories = {\n      elem: etra,\n      dateslider: etra.getElementsByClassName('slider')[0],\n      datestart: etra.getElementsByClassName('date-start')[0],\n      dateend: etra.getElementsByClassName('date-end')[0],\n      authors: {\n        header: etra.getElementsByClassName('header')[1],\n        list: etra.getElementsByClassName('authors-list')[0]\n      },\n      map: {\n        header: etra.getElementsByClassName('header')[2],\n        view: etra.getElementsByClassName('map')[0]\n      }\n    }\n  }   \n}\n\nclass ItinerariesUI extends UI {\n  constructor() {\n    super();\n    var eiti = document.getElementById('itineraries');\n    this.dom.itineraries = {\n      elem: eiti,\n      authors: {\n        selections: eiti.getElementsByClassName('selections')[0],\n        header: eiti.getElementsByClassName('header')[0],\n        list: eiti.getElementsByClassName('authors-list')[0],\n        author1: eiti.getElementsByClassName('author')[0],\n        author2: eiti.getElementsByClassName('author')[1]\n      },\n      selections: [\n        { \n          header: eiti.getElementsByClassName('itinerary-header')[0],\n          view: eiti.getElementsByClassName('itinerary-view')[0]\n        },\n        { \n          header: eiti.getElementsByClassName('itinerary-header')[1],\n          view: eiti.getElementsByClassName('itinerary-view')[1]\n        }\n      ]\n    }    \n    \n  }  \n}\n\nclass SearchUI extends UI {\n  constructor() {\n    super();\n    this.dom = {\n      searchfield: document.getElementById('search-field'),\n      searchresults: document.getElementById('search-results')\n    };\n  }\n}"]}