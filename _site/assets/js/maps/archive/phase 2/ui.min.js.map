{"version":3,"sources":["archive/phase 2/ui.js"],"names":["UI","[object Object]","this","palette","clr1","clr2","clr3","black","white","neutral","darkneutral","coolneutral","eint","document","getElementById","etra","eiti","dom","tabs","getElementsByTagName","searchfield","searchresults","intersections","elem","legend","getElementsByClassName","dateslider","datestart","dateend","map","header","view","results","title","trajectories","authors","list","itineraries","selections","author1","author2","initLegendUI","d3","select","on","transition","duration","style","remove","children","panels","i","length","setAttribute","onclick","j","display","classList","k","add","getAttribute","h","window","innerHeight","clientHeight","obj","count","prop","hasOwnProperty","authorItemTemplate","name","key","tag","escapeHtml","string","entityMap","&","<",">","\"","'","/","`","=","String","replace","s","ui","initPanels"],"mappings":"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","file":"../../../archive/phase 2/ui.min.js","sourcesContent":["/* global d3 */\n\nclass UI {\n\t\n  constructor(){\n            \n    // Mirrors variables in assets/sass/style.css\n    \n    this.palette = {\n      clr1:        '#EE7B22', // Orange\n      clr2:        '#F9D5B6', // Canteloupe\n      clr3:        '#D2D9AC', // Green \n      black:       '#161C1E',\n      white:       '#F7F8F9',\n      neutral:     '#F9F9F9',\n      darkneutral: '#2D393F', // Charcoal\n      coolneutral: '#E2E5E8' // Cool blue\n    }\n    \n    var eint = document.getElementById('intersections');\n    var etra = document.getElementById('trajectories');\n    var eiti = document.getElementById('itineraries');\n    \n    // Model key DOM elements for each visualization\n    \n    this.dom = {\n      tabs: document.getElementById('tabs').getElementsByTagName('a'),\n      searchfield: document.getElementById('search-field'),\n      searchresults: document.getElementById('search-results')\n    };\n        \n    this.dom.intersections = {\n      elem: eint,\n      legend: eint.getElementsByClassName('legend')[0],\n      dateslider: eint.getElementsByClassName('slider')[0],\n      datestart: eint.getElementsByClassName('date-start')[0],\n      dateend: eint.getElementsByClassName('date-end')[0],\n      map: {\n        header: eint.getElementsByClassName('header')[1],\n        view: eint.getElementsByClassName('map')[0]\n      },\n      results: {\n        header: eint.getElementsByClassName('header')[2],\n        title: eint.getElementsByClassName('title')[0],\n        view: eint.getElementsByClassName('results-view')[0]\n      }\n    }\n    \n    this.dom.trajectories = {\n      elem: etra,\n      dateslider: etra.getElementsByClassName('slider')[0],\n      datestart: etra.getElementsByClassName('date-start')[0],\n      dateend: etra.getElementsByClassName('date-end')[0],\n      authors: {\n        header: etra.getElementsByClassName('header')[1],\n        list: etra.getElementsByClassName('authors-list')[0]\n      },\n      map: {\n        header: etra.getElementsByClassName('header')[2],\n        view: etra.getElementsByClassName('map')[0]\n      }\n    }\n    \n    this.dom.itineraries = {\n      elem: eiti,\n      authors: {\n        selections: eiti.getElementsByClassName('selections')[0],\n        header: eiti.getElementsByClassName('header')[0],\n        list: eiti.getElementsByClassName('authors-list')[0],\n        author1: eiti.getElementsByClassName('author')[0],\n        author2: eiti.getElementsByClassName('author')[1]\n      },\n      selections: [\n        { \n          header: eiti.getElementsByClassName('itinerary-header')[0],\n          view: eiti.getElementsByClassName('itinerary-view')[0]\n        },\n        { \n          header: eiti.getElementsByClassName('itinerary-header')[1],\n          view: eiti.getElementsByClassName('itinerary-view')[1]\n        }\n      ]\n    }\n    \n    this.initLegendUI();\n  }  \n  \n  initLegendUI() {\n    d3.select(this.dom.intersections.legend).on('click',function(){\n      d3.select(this)\n        .transition()\n        .duration(800)\n        .style('opacity',0)\n        .remove();\n    });\n  }\n  \n  initPanels() {\n            \n    var tabs = document.getElementById(\"tabs\").children;\n    var panels = document.getElementById(\"panels\").children;\n    \n    for(var i=0;i<tabs.length;i++) {\n      tabs[i].setAttribute('data-panel',i);\n      tabs[i].onclick = function() {\n        for(var j=0;j<panels.length;j++) {\n          panels[j].style.display = 'none';\n          panels[j].classList.remove('selected');\n        }\n        for(var k=0;k<panels.length;k++) {\n          tabs[k].classList.remove('active');\n        }\n        this.classList.add('active');\n        panels[this.getAttribute('data-panel')].style.display = 'block';\n        panels[this.getAttribute('data-panel')].classList.add('selected');\n\n      }\n    }\n    \n    // set the minimum height of the panels, which should be the window height less the nav elements`.\n    \n    var h = window.innerHeight - document.getElementById('nav').clientHeight - this.dom.intersections.map.header.clientHeight; \n        \n    document.getElementById('panels').setAttribute(\"style\",\"min-height:\" + h + \"px\");\n  }\n  \n  generateAuthorList(obj) {\n    \n    var list = '';\n    var i = 1;\n    var count = 1;\n    \n    for (var prop in obj.authors) {\n      \n      if (i%2 != 0) {\n        list += \"<div class='arow'>\\n\";\n      }\n      \n      if (obj.authors.hasOwnProperty(prop)) {        \n        list += this.authorItemTemplate(obj.authors[prop],prop,'a',count) + \"\\n\";\n      }\n      \n      if (i%2 == 0) {\n        list += \"</div>\\n\";\n      }\n      \n      i = i == 2 ? 1 : 2;\n      count++;\n    }\n    \n    return list;\n    \n  }\n  \n  authorItemTemplate(name,key,tag,count) {\n    return \"<\" + tag + \" data-key='\" + key + \"' class='author a-\" + count + \"' title='\" + this.escapeHtml(name) + \"'>\" + name + \"</\" + tag + \">\";\n  }\n  \n\n  escapeHtml (string) {\n    var entityMap = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#39;',\n      '/': '&#x2F;',\n      '`': '&#x60;',\n      '=': '&#x3D;'\n    };\n\n    return String(string).replace(/[&<>\"'`=\\/]/g, function (s) {\n      return entityMap[s];\n    });\n  }  \n  \n}\n\nvar ui = new UI;\nui.initPanels();\n"]}