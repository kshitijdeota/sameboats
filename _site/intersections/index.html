<html lang="en_US"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta http-equiv="Cache-control" content="no-cache"> <!-- stylesheets --><link rel='stylesheet' type='text/css' href="/sameboats/assets/css/leaflet.css" /><link rel='stylesheet' type='text/css' href="/sameboats/assets/css/nouislider-15.1.0.css" /><link rel='stylesheet' type='text/css' href="/sameboats/assets/css/style.css" /></head><body class="visualization"><div id='nav'> <a id='title' href='/sameboats/' title='In the Same Boats'><figure> <img src="/sameboats/assets/img/itsb_icon.svg" /></figure><span>In the Same Boats</span> </a><div id='tabs'> <a href='/sameboats/' data-mode='0'> <img src="/sameboats/assets/img/home.svg" class="navicon" title="home"><span class="navtext">Home</span></a> <a href='/sameboats/instructions' data-mode='0'><img src="/sameboats/assets/img/about.svg" class="navicon" title="Credits"><span class="navtext">Instructions</span></a> <!-- <a href='/page' data-mode='0'><img src="/assets/img/page.svg" class="navicon" title="Page"><span class="navtext">Generic Page</span></a> --> <a href='/sameboats/trajectories' data-mode='2'><img src="/sameboats/assets/img/visualization.svg" class="navicon" title="Trajectories"><span class="navtext">Trajectories</span></a> <a href='/sameboats/intersections' data-mode='1'><img src="/sameboats/assets/img/visualization_active.svg" class="navicon" title="Intersections"><span class="navtext">Intersections</span></a> <a href='/sameboats/search' data-mode='0'><img src="/sameboats/assets/img/search.svg" class="navicon" title="Search"><span class="navtext">Search</span></a> <a href='/sameboats/credits' data-mode='0'><img src="/sameboats/assets/img/about.svg" class="navicon" title="Credits"><span class="navtext">Credits</span></a></div></div><div id="contents"><div id='panels'><div id='intersections' class='panel selected'><div class='date-range'><div class='header'> Select Range</div><div class='date-selector'><div class='indicator'> <span class='date-start'></span> â€“ <span class='date-end'></span></div><div class='slider'></div></div></div><div class='location'><div class='header'> Select Location</div><div class='map'></div><div class='legend'><div class='legend-header'>Legend</div><div class='legend-body'><div class='legend-item'><div class='legend-text'>Rings indicate possible intersections.</div><div class='legend-illustration'> <svg height='100%' width='100%'> <g class="points_g"transform="translate(25,20)"> <circle class="point_back" cx="0" cy="0" r="7.2"></circle><circle class="point_01 point" cx="0" cy="0" r="10"></circle><circle class="point_02 point" cx="0" cy="0" r="7.2"></circle> <circle class="point_03 point" cx="0" cy="0" r="4"></circle> </g> </svg></div></div><div class='legend-item'><div class='legend-text'>Solid circles indicate definite intersections.</div><div class='legend-illustration'> <svg height='100%' width='100%'> <g class="points_g"transform="translate(25,20)"> <circle class="point_03 point" cx="0" cy="0" r="7.2"></circle> </g> </svg></div></div></div></div></div><div class='results'><div class='header'> Intersecting Authors</div><div class='items'><div class='title'></div><div class='results-view' id='intersections-results'></div></div></div></div></div></div><div id='container'></div><script type='text/javascript' src="/sameboats/assets/js/libs/jquery-3.4.1.min.js"></script> <script type='text/javascript' src="/sameboats/assets/js/libs/nouislider-15.1.0.js"></script> <script type='text/javascript' src="/sameboats/assets/js/libs/wnumb-1.2.0.js"></script> <script type='text/javascript' src="/sameboats/assets/js/libs/leaflet.js"></script> <script type='text/javascript' src="/sameboats/assets/js/script.js"></script><style> #map { /*height: 100vh;*/ } body { padding: 0; margin: 0; } html, body, #map { height: 100%; width: 100%; } #slider { overflow: auto; max-height: 80vh; }</style><script type="text/javascript"> function leapYear(year) { return ((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0); } var totalMonthsShown = 12; var today = new Date(); var todayMonthIndex = today.getMonth(); var todayYear = today.getFullYear(); var monthSlider = document.getElementById('month-slider'); var months = [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'June', 'July', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ]; var daysInMonths = [31,28,31,30,31,30,31,31,30,31,30,31]; var monthLabels = []; var monthYearLabels = []; var monthData = []; var lastDaysData = []; // Start iterator variables with today's year and month. var thisYear = todayYear; var thisMonth = todayMonthIndex; // Iterate backwards through all the months to display setting // the values of items on the scale for (i = (totalMonthsShown - 1); i >= 0; i--) { monthYearLabels[i] = months[thisMonth] + ' ' + thisYear; monthLabels[i] = months[thisMonth]; monthData[i] = thisYear + '-' + (thisMonth + 1); // February then ensure leap days are considered. if (thisMonth == 1 && leapYear(thisYear)) { lastDaysData[i] = 29; } else { lastDaysData[i] = daysInMonths[thisMonth]; } // When month reaches January then decrement the year // and set the month to December for the next iteration. // For all other months then the only the month is decremented. if (thisMonth == 0) { thisMonth = 11; thisYear--; } else { thisMonth--; } } var range = { 'min': 0, 'max': totalMonthsShown -1 } noUiSlider.create(monthSlider, { start: [totalMonthsShown -1, totalMonthsShown -1], step: 1, range: range, tooltips: true, connect: true, animate: true, animationDuration: 600, pips: { mode: 'steps', density: totalMonthsShown -1, // Force major pips for value. filter: function() { return 1; } } }); // Remove the shortcut active class when manually setting a range. monthSlider.noUiSlider.on('start', function() { $('.shortcuts li').removeClass('active'); }); monthSlider.noUiSlider.on('update', function(values, handle) { var monthIndex = parseInt(values[handle]); var prefixes = ['From', 'To']; if (handle == 0) { var day = 1; } else if (handle == 1) { var day = lastDaysData[monthIndex]; } // Set the tooltip values. $('.noUi-handle[data-handle="' + handle + '"]').find('.noUi-tooltip').html(prefixes[handle] + '<br /><strong>' + day + ' ' + monthYearLabels[monthIndex] + '</strong>'); // Update the pips values. $('.noUi-pips .noUi-value').each(function() { var index = $(this).html(); $(this).html(monthLabels[index]); }); // Update the input elements. var minValueIndex = parseInt(values[0]); var maxValueIndex = parseInt(values[1]); $('input[name="month-range-min"]').val(monthData[minValueIndex]); $('input[name="month-range-max"]').val(monthData[maxValueIndex]); }); $('.month-slider-wrapper .shortcuts li').mousedown(function() { var monthPeriod = $(this).attr('data-min-range'); var newValues = [ (totalMonthsShown - monthPeriod), (totalMonthsShown -1) ]; monthSlider.noUiSlider.set(newValues); $('.shortcuts li').removeClass('active'); $(this).addClass('active'); }); var map = L.map('map').setView([51.505, -0.09], 13); L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors' }).addTo(map); // L.marker([51.5, -0.09]).addTo(map) // .bindPopup('A pretty CSS3 popup.<br> Easily customizable.') // .openPopup(); // L.circle([51.5, -0.09], {radius: 500, color: "coral", fillOpacity: 0.5}).addTo(map); // var xmlhttp = new XMLHttpRequest(); // xmlhttp.onreadystatechange = function() { // if (this.readyState == 4 && this.status == 200) { // var myObj = JSON.parse(this.responseText); // var StartDate = myObj["1866-01"][0].StartDate; // var EndDate = myObj["1866-01"][0].EndDate; // var DateStart = document.getElementsByClassName("date-start"); // var DateEnd = document.getElementsByClassName("date-end"); // DateStart[0].innerHTML = StartDate; // DateEnd[0].innerHTML = EndDate; // } // }; // xmlhttp.open("GET", "../data/itineraries.json", true); // xmlhttp.send(); </script></body></html>